<%content_for(:html_title) { @plant.name }%>
<section class="section">
  <div class="container">
    <div class="columns is-centered">
      <div class="column is-three-quarters">
        <div class="box">
          <div class="columns is-vcentered">
            <% if @plant.image.present? %>
              <div class="column is-one-quarter">
                <figure class="image is-256x256">
                  <%= image_tag(@plant.image, alt: "#{@plant.name} Image") %>
                </figure>
              </div>
            <% end %>
            <div class="column">
              <h1 class="title"><%= @plant.name %></h1>
              <p class="subtitle"><%= @plant.description %></p>
            </div>
          </div>
        </div>
        <div class="box">
          <h2 class="title">Information</h2>
          <ul>
            <li><strong>Price: </strong>CA$ <%= @plant.price %></li>
            <% if @plant_current_stock == 0 %>
              <li><strong>Stock: </strong>Out of Stock</li>
            <% else %>
              <li><strong>Stock: </strong><%= @plant.stock %></li>
            <% end %>
            <li><strong>In cart: </strong><%= @plant_in_cart.nil? ? 0 : @plant_in_cart %></li>
            <li><strong>Other Names: </strong><%= @plant.other_name %></li>
            <li><strong>Type: </strong><%= link_to @plant.plant_type.name, @plant.plant_type %></li>
          </ul>
          <% if @plant_current_stock > 0 %>
            <%= form_with url: cart_index_path, method: :post, class: "has-text-centered" do |form| %>
              <%= hidden_field_tag(:id, @plant.id) %>
              <div class="field has-addons has-addons-centered">
                <div class="control">
                  <%= number_field_tag(:quantity, 1, min: 1, max: @plant_current_stock.to_i, class: "input is-primary") %>
                </div>
                <div class="control">
                  <%= button_tag 'Add to Cart', class: "button is-primary" %>
                </div>
              </div>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</section>
